# VOUCH // ANDROID 16 CONFIGURATION

> **Target Platform**: Android 16 (API Level 35)
> **Build Tools**: 35.0.0
> **Min SDK**: 24 (Android 7.0+)

---

## CONFIGURATION OVERVIEW

The Vouch mobile app is now configured to target **Android 16** (API Level 35), the latest Android version as of 2026. This ensures compatibility with the newest Android features and security requirements.

---

## KEY SETTINGS

### SDK Versions (`app.json`)

```json
{
  "android": {
    "compileSdkVersion": 35,    // Android 16
    "targetSdkVersion": 35,     // Android 16
    "minSdkVersion": 24,        // Android 7.0+ (96%+ device coverage)
    "buildToolsVersion": "35.0.0"
  }
}
```

### Build Configuration (`eas.json`)

All build profiles (development, preview, production) are configured to use Android SDK 35:

```json
{
  "build": {
    "development": {
      "android": {
        "buildType": "apk",
        "gradleCommand": ":app:assembleDebug"
      },
      "env": {
        "ANDROID_SDK_VERSION": "35"
      }
    }
  }
}
```

---

## PERMISSIONS

The following permissions are configured for Android 16 compatibility:

### Required for Vouch Features

1. **CAMERA** - Proof-of-work photo capture
2. **READ_EXTERNAL_STORAGE** - Access workout photos
3. **WRITE_EXTERNAL_STORAGE** - Save workout photos
4. **ACTIVITY_RECOGNITION** - Google Fit workout detection
5. **ACCESS_FINE_LOCATION** - GPS tracking for running/cycling
6. **ACCESS_COARSE_LOCATION** - General location for workouts
7. **BODY_SENSORS** - Heart rate monitoring via Google Fit

### Runtime Permissions

Android 16 requires runtime permission requests for:
- Camera (before photo capture)
- Location (before GPS tracking)
- Activity Recognition (before Google Fit sync)
- Body Sensors (before HR data access)

**Implementation**: See `mobile/src/hooks/usePermissions.ts` (TODO)

---

## ANDROID 16-SPECIFIC FEATURES

### 1. Enhanced Privacy Controls
- Users can grant "approximate location" instead of precise location
- One-time permission grants expire after app restart
- Background location requires explicit user consent

### 2. Predictive Back Gesture
- Users can preview back navigation before completing gesture
- Requires React Navigation configuration (TODO)

### 3. Performance Improvements
- Native support for React Native 0.76.6
- Improved garbage collection for smoother animations
- Faster app startup times

### 4. Security Enhancements
- Stricter keystore requirements
- Enhanced biometric authentication
- Improved certificate pinning

---

## GOOGLE FIT INTEGRATION (ANDROID)

### Required Setup

1. **Google Fit API** must be enabled in Google Cloud Console
2. **OAuth 2.0 Client ID** for Android app
3. **SHA-1 fingerprint** from keystore must be registered

### Configuration Files

```
mobile/
├── google-services.json    (TODO - from Firebase)
└── android/
    └── app/
        └── build.gradle    (Auto-generated by Expo)
```

### Google Fit Scopes

```kotlin
// Required for workout data
Fitness.SCOPE_ACTIVITY_READ
Fitness.SCOPE_LOCATION_READ
Fitness.SCOPE_BODY_READ
```

**Implementation**: See `mobile/src/hooks/useBiometricSync.ts`

---

## HEALTHKIT vs GOOGLE FIT

| Feature | iOS (HealthKit) | Android (Google Fit) |
|---------|-----------------|----------------------|
| Workout Type | ✓ | ✓ |
| Duration | ✓ | ✓ |
| Calories | ✓ | ✓ |
| Distance | ✓ | ✓ |
| Heart Rate | ✓ | ✓ |
| GPS Route | ✓ | ✓ |
| Elevation | ✓ | ✓ |
| Setup | Automatic | Requires OAuth |

---

## BUILDING FOR ANDROID 16

### Local Development

```bash
cd mobile

# Start Expo dev server
npm start

# Run on Android emulator (must have API 35 image installed)
npm run android

# Or use Expo Go (limited biometric features)
```

### Cloud Builds (EAS)

```bash
# Development build (APK)
npm run build:android -- --profile development

# Preview build (APK)
npm run build:android -- --profile preview

# Production build (AAB for Play Store)
npm run build:android -- --profile production
```

### Testing on Physical Device

1. Enable **Developer Options** on Android device
2. Enable **USB Debugging**
3. Connect via USB and run: `npm run android`
4. Or install APK from EAS build

---

## ANDROID 16 COMPATIBILITY

### Verified Compatible
- ✓ Expo SDK 54
- ✓ React Native 0.76.6
- ✓ Privy Mobile SDK
- ✓ Firebase SDK
- ✓ React Navigation
- ✓ Expo Camera
- ✓ Expo Image Picker

### Pending Testing
- [ ] Google Fit integration (not yet implemented)
- [ ] Push notifications
- [ ] Background tasks
- [ ] Offline sync

---

## TROUBLESHOOTING

### Build Fails with "SDK 35 not found"

**Solution**: EAS Build will automatically download SDK 35. If building locally:

```bash
# Install Android SDK 35 via Android Studio SDK Manager
# Or via command line:
sdkmanager "platforms;android-35"
sdkmanager "build-tools;35.0.0"
```

### Google Fit Permission Denied

**Solution**: Ensure OAuth 2.0 client ID is configured in Google Cloud Console:
1. Go to Google Cloud Console
2. Enable Google Fit API
3. Create OAuth 2.0 credentials
4. Add SHA-1 fingerprint from your keystore

### Camera/Location Not Working

**Solution**: Runtime permissions must be requested before use:

```typescript
import { Camera } from 'expo-camera';

const { status } = await Camera.requestCameraPermissionsAsync();
if (status !== 'granted') {
  // Show error to user
}
```

---

## ADAPTIVE ICON

Android 16 requires adaptive icons for proper display across launchers.

### Configuration

```json
{
  "android": {
    "adaptiveIcon": {
      "foregroundImage": "./assets/adaptive-icon.png",
      "backgroundColor": "#000000"
    }
  }
}
```

### Design Requirements
- **Foreground**: 1024x1024px PNG with transparent background
- **Safe Zone**: Keep content within 924x924px center
- **Background**: Pure black (#000000) for terminal aesthetic

**Status**: Icon assets need to be created (TODO)

---

## NEXT STEPS

### Phase 1: Google Fit Integration
1. [ ] Set up Google Cloud project with Fit API
2. [ ] Implement OAuth flow in `useBiometricSync.ts`
3. [ ] Request Activity Recognition permission
4. [ ] Fetch workout data from Fitness API
5. [ ] Test on physical Android device

### Phase 2: Push Notifications
1. [ ] Set up Firebase Cloud Messaging
2. [ ] Request notification permission
3. [ ] Handle roast notifications
4. [ ] Test background delivery

### Phase 3: Optimization
1. [ ] Implement predictive back gesture
2. [ ] Optimize startup time
3. [ ] Add app shortcuts
4. [ ] Test on Android 16 beta devices

---

## RESOURCES

- [Android 16 Release Notes](https://developer.android.com/about/versions/16)
- [Expo Android Configuration](https://docs.expo.dev/versions/latest/config/app/#android)
- [Google Fit API Docs](https://developers.google.com/fit/android)
- [React Native 0.76 Changelog](https://github.com/facebook/react-native/releases/tag/v0.76.0)

---

**STATUS**: Android 16 configuration complete. Ready for Google Fit implementation.

**VOUCH // ANDROID 16 // CONFIGURED**
